<%- include('header') %>

<style>
  /* Contact messages specific styles */
  body { 
    background:#f8f9fa; 
  }

  .table-contact { 
    background: #fff; 
    border-radius: 12px; 
    box-shadow: 0 4px 18px rgba(10,20,40,0.06); 
  }
  .table-contact th, 
  .table-contact td { 
    vertical-align: middle; 
  }
  .table-contact th { 
    background: #f8f9fb; 
    font-weight: 600; 
  }
  .contact-message { 
    max-width: 400px; 
    white-space: pre-line; 
  }

  .admin-nav {
    background: #fff;
    border-bottom: 1px solid #e9ecef;
    padding: 1rem 0;
    margin-bottom: 2rem;
    box-shadow: 0 2px 8px rgba(10,20,40,0.04);
  }
  .admin-nav .nav-link {
    font-weight: 500;
    color: #495057;
    transition: color 0.2s;
  }
  .admin-nav .nav-link:hover {
    color: #007bff;
  }
  .admin-nav .nav-link.active {
    color: #007bff;
    font-weight: 600;
  }
</style>

<!-- Admin Navigation -->
<nav class="admin-nav">
  <div class="container-fluid px-xl-5">
    <div class="d-flex align-items-center justify-content-between">
      <a class="navbar-brand font-weight-bold h5 mb-0" href="/admin">
        <i class="fas fa-cog"></i> Admin Panel
      </a>
      <ul class="nav">
        <li class="nav-item">
          <a class="nav-link" href="/admin">Dashboard</a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" href="/admin/contacts">Contact Messages</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/logout">
            <i class="fas fa-sign-out-alt"></i> Logout
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<!-- Contact Messages Content -->
<div class="container py-4">
  <div class="d-flex align-items-center justify-content-between mb-4">
    <h2 class="mb-0">Contact Messages</h2>
    <a href="/admin" class="btn btn-outline-secondary">
      <i class="fas fa-arrow-left"></i> Back to Dashboard
    </a>
  </div>

  <div class="table-responsive">
    <table class="table table-contact table-bordered">
      <thead>
        <tr>
          <th>Name</th>
          <th>Email</th>
          <th>Message</th>
          <th>Date</th>
        </tr>
      </thead>
      <tbody>
        <% if (messages.length === 0) { %>
          <tr>
            <td colspan="4" class="text-center text-muted py-5">
              <i class="fas fa-inbox fa-3x mb-3 d-block" style="opacity: 0.3;"></i>
              No contact messages yet.
            </td>
          </tr>
        <% } %>
        <% messages.forEach(function(msg) { %>
          <tr>
            <td><strong><%= msg.name %></strong></td>
            <td>
              <a href="mailto:<%= msg.email %>">
                <i class="fas fa-envelope mr-1"></i><%= msg.email %>
              </a>
            </td>
            <td class="contact-message"><%= msg.message %></td>
            <td style="white-space: nowrap;">
              <%= msg.createdAt.toLocaleString() %>
            </td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  </div>

  <% if (messages.length > 0) { %>
    <div class="text-muted small mt-3">
      Total messages: <strong><%= messages.length %></strong>
    </div>
  <% } %>
</div>

<%- include('footer') %>